<!-- fragments/scripts.html -->
<script th:fragment="theme-script">
  document.addEventListener("DOMContentLoaded", function () {
    const checkbox = document.getElementById("themeCheckbox");
    const htmlElement = document.documentElement;

    if (!checkbox) {
      console.warn("themeCheckbox not found.");
      return;
    }

    // Load saved state
    const savedTheme = localStorage.getItem("theme") || "light";
    htmlElement.setAttribute("data-theme", savedTheme);
    checkbox.checked = savedTheme === "dark";

    // Save and apply theme on change
    checkbox.addEventListener("change", function () {
      const newTheme = this.checked ? "dark" : "light";
      htmlElement.setAttribute("data-theme", newTheme);
      localStorage.setItem("theme", newTheme);
    });
  });
</script>
